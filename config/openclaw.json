{
  "gateway": {
    "port": 18789,
    "bind": "loopback",
    "mode": "local",
    "auth": {
      "mode": "token"
    }
  },
  "channels": {
    "telegram": {
      "enabled": true,
      "dmPolicy": "allowlist",
      "allowFrom": [],
      "streaming": "off"
    },
    "slack": {
      "enabled": true,
      "mode": "socket",
      "groupPolicy": "open",
      "streaming": "off",
      "nativeStreaming": false
    }
  },
  "plugins": {
    "entries": {
      "telegram": {
        "enabled": true
      },
      "slack": {
        "enabled": true
      },
      "acpx": {
        "enabled": true
      }
    }
  },
  "messages": {
    "tts": {
      "auto": "off",
      "provider": "openai"
    }
  },
  "browser": {
    "enabled": true,
    "headless": true,
    "noSandbox": true,
    "attachOnly": true,
    "executablePath": "/usr/bin/chromium",
    "defaultProfile": "openclaw",
    "profiles": {
      "openclaw": {
        "cdpPort": 18800,
        "color": "#FF4500"
      }
    }
  },
  "agents": {
    "defaults": {
      "model": {
        "primary": "openrouter/anthropic/claude-opus-4.6"
      },
      "models": {
        "openrouter/anthropic/claude-sonnet-4.5": { "alias": "Sonnet" },
        "openrouter/anthropic/claude-opus-4.6": { "alias": "Opus" },
        "openrouter/anthropic/claude-haiku-4.5": { "alias": "Haiku" },
        "openrouter/openai/gpt-5.2-codex": { "alias": "Codex" }
      },
      "sandbox": {
        "mode": "off"
      },
      "compaction": {
        "memoryFlush": {
          "enabled": true,
          "softThresholdTokens": 4000
        }
      },
      "contextPruning": {
        "mode": "cache-ttl",
        "ttl": "5m",
        "keepLastAssistants": 3,
        "softTrim": {
          "maxChars": 4000,
          "headChars": 1500,
          "tailChars": 1500
        },
        "hardClear": {
          "enabled": true,
          "placeholder": "[Old tool result cleared]"
        },
        "tools": {
          "allow": ["exec", "read", "web_fetch", "browser", "process"],
          "deny": ["memory_search", "memory_get"]
        }
      }
    }
  },
  "session": {
    "maintenance": {
      "mode": "enforce",
      "pruneAfter": "30d",
      "maxEntries": 500,
      "maxDiskBytes": "2gb"
    }
  },
  "acp": {
    "enabled": true,
    "dispatch": { "enabled": true },
    "backend": "acpx",
    "defaultAgent": "codex",
    "allowedAgents": ["codex", "claude"],
    "maxConcurrentSessions": 4,
    "stream": {
      "coalesceIdleMs": 300,
      "maxChunkChars": 1200
    },
    "runtime": {
      "ttlMinutes": 120
    }
  },
  "hooks": {
    "internal": {
      "enabled": true
    }
  },
  "memory": {
    "backend": "qmd",
    "citations": "auto",
    "qmd": {
      "includeDefaultMemory": true,
      "update": {
        "interval": "5m",
        "debounceMs": 15000,
        "waitForBootSync": false
      },
      "limits": {
        "maxResults": 6,
        "maxSnippetChars": 2000,
        "timeoutMs": 4000
      }
    }
  }
}
